# **01 – Environment Setup (Production Lab Build)**

## **Overview**
This phase establishes a **production-like SQL Server environment** designed to mimic enterprise database administration tasks. The setup focuses on creating core databases, configuring security, scheduling automated tasks, and simulating a workload that reflects real-world application activity. This foundation is critical for all advanced DBA activities such as troubleshooting, performance tuning, and disaster recovery.

---

## **Tasks Completed**
- **SQL Server & SSMS Installation**  
  Installed SQL Server Developer Edition (2022) and SQL Server Management Studio (SSMS 19.x) for database management.

- **Databases Created**
  - `ProdDB` – Primary production database.
  - `LogsDB` – Used for logging and audit trails.
  - `ReportsDB` – Dedicated reporting and analytics database.

- **Users & Security**
  - Created three SQL logins and mapped them as users:
    - **Mary** – Data entry access.
    - **John** – Reporting (read-only) access.
    - **Tom** – Application-level access with insert/update permissions.

- **SQL Agent Jobs**
  - **Backup_Job:** Daily full backup of `ProdDB`.
  - **Data_Archive_Job:** Moves older data to archive tables in `ReportsDB`.
  - **InsertSalesJob:** Inserts randomized sales records into `Sales` table every 5 minutes.

- **Workload Simulation**
- Created a `Sales` table to store test sales data.
- Configured `InsertSalesJob` (SQL Agent job) to insert random product data:
  - Products: Laptop, Monitor, Keyboard, Mouse, Printer.
  - Quantity: Random number between 1 and 10.
- Verified that data grows over time as the job runs.

---

## **Key SQL Scripts**
### **Create Databases**
```sql
CREATE DATABASE ProdDB;
CREATE DATABASE LogsDB;
CREATE DATABASE ReportsDB;

### **Create users**
USE ProdDB;
CREATE LOGIN Mary WITH PASSWORD = '*************!';
CREATE USER Mary FOR LOGIN Mary;

CREATE LOGIN John WITH PASSWORD = '*************!';
CREATE USER John FOR LOGIN John;

CREATE LOGIN Tom WITH PASSWORD = '**************!';
CREATE USER Tom FOR LOGIN Tom;

### **Create Sales Table**
USE ProdDB;
CREATE TABLE Sales (
    SaleID INT IDENTITY(1,1),
    Product NVARCHAR(50),
    Quantity INT,
    SaleDate DATETIME DEFAULT GETDATE()
);

### **Insert Random Data (Job Step)**
USE ProdDB;
INSERT INTO Sales (Product, Quantity)
VALUES (
    CHOOSE(1, 'Laptop', 'Monitor', 'Keyboard', 'Mouse', 'Printer'),
    FLOOR(RAND() * 10) + 1
);


```
## Verification Steps
- Check SQL Agent Job History

SSMS → SQL Server Agent → Jobs → Right-click InsertSalesJob → View History.

- Confirm that the job ran successfully every 5 minutes.

- Check Inserted Data

```sql
SELECT TOP 10 * 
FROM ProdDB.dbo.Sales
ORDER BY SaleDate DESC;
```
- Check Backups

Confirm backup files are being generated by Backup_Job in C:\DBA_Backups.

## Lessons Learned
  - Separation of Roles & Security: Learned how to structure logins vs. database users and assign least-privilege roles, mirroring real production security practices.
  - Automation Mindset: Understood how SQL Server Agent can automate daily DBA tasks like backups and data generation, saving time and reducing errors.
  - Workload Simulation: Built a scheduled job to simulate transactional activity, which is essential for performance testing and monitoring growth trends.
  - Environment Validation: Gained experience with job history checks, T-SQL verification queries, and log reviews to confirm that automation works as expected.
  - Production-Like Thinking: Approached the environment setup as if it were real production, ensuring backups, permissions, and data flow were configured correctly from day one.

